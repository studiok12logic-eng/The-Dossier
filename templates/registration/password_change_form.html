{% extends "mobile/base_mobile.html" %}

{% block title %}Change Password{% endblock %}

{% block content %}
<div class="flex flex-col min-h-full bg-background pb-20">

    <!-- Header -->
    <header class="h-14 px-4 flex items-center gap-4 border-b border-white/10 bg-surface/95 backdrop-blur sticky top-0 z-30">
        <a href="{% url 'profile' %}" class="w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/5 text-text-sub transition-colors">
            <i class="fas fa-arrow-left"></i>
        </a>
        <span class="text-xs font-bold text-text-sub uppercase tracking-wider">CHANGE PASSWORD</span>
    </header>

    <!-- Content -->
    <div class="p-4">
        <div class="bg-surface rounded-xl p-6 border border-white/5">
            <form method="post" class="space-y-6">
                {% csrf_token %}
                
                {% for field in form %}
                <div class="space-y-1">
                    <label class="text-xs font-bold text-text-sub uppercase tracking-wider ml-1">{{ field.label }}</label>
                    <div class="relative">
                        <!-- Basic styling for fields rendered by Django widgets -->
                        <!-- If they are standard widgets, we can't easily inject classes without filters, 
                             so we style the inputs via global CSS or basic container styling. 
                             However, for better UX, let's try to target them with adjacent selectors or JS if needed. 
                             Proping simple rendering for now. -->
                        {{ field }}
                    </div>
                    {% if field.help_text %}
                    <p class="text-[10px] text-text-sub/50 ml-1">{{ field.help_text }}</p>
                    {% endif %}
                    {% if field.errors %}
                    <ul class="text-xs text-red-400 ml-1">
                        {% for error in field.errors %}<li>{{ error }}</li>{% endfor %}
                    </ul>
                    {% endif %}
                </div>
                {% endfor %}

                <div class="pt-4">
                    <button type="submit" class="w-full bg-primary text-black font-bold py-3 rounded-full shadow-lg active:scale-95 transition-transform">
                        Update Password
                    </button>
                    <a href="{% url 'profile' %}" class="block text-center text-xs text-text-sub hover:text-white mt-4">Cancel</a>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
    /* Quick hack to style default Django inputs if they lack classes */
    input[type="password"] {
        width: 100%;
        background-color: rgba(255, 255, 255, 0.05); /* bg-surface */
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 0.5rem;
        padding: 0.75rem 1rem;
        color: white;
        font-size: 0.875rem;
        outline: none;
        transition: border-color 0.2s;
    }
    input[type="password"]:focus {
        border-color: #22c55e; /* primary */
    }
</style>
{% endblock %}
